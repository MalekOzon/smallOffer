{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/public/resourses/alert-circle.svg.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 37, height: 36, blurDataURL: null, blurWidth: 0, blurHeight: 0 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,+HAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAM,WAAW;IAAG,YAAY;AAAE","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/app/lib/loginservices/api.ts"],"sourcesContent":["import { forgetPasswordType, loginType, signupType, signupStep1Type, signupStep2Type, resetPasswordType, resendEmailCodeType, resendUrlType, logoutType } from \"@/app/types/authTypes\";\r\nimport axios from \"axios\";\r\n\r\nconst BASE_URL = \"https://smalloffertest.onrender.com/api/\";\r\n\r\nexport const axiosInstance = axios.create({\r\n  baseURL: BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\naxiosInstance.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"accessToken\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\naxiosInstance.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n\r\n    if (\r\n      error.response?.status === 401 &&\r\n      !originalRequest._retry &&\r\n      localStorage.getItem(\"refreshToken\")\r\n    ) {\r\n      originalRequest._retry = true;\r\n      try {\r\n        const refreshToken = localStorage.getItem(\"refreshToken\");\r\n        const res = await axios.post(`${BASE_URL}accounts/token/refresh/`, {\r\n          refresh: refreshToken,\r\n        });\r\n\r\n        const { access, refresh } = res.data; // استخراج كلا الحقلين\r\n        localStorage.setItem(\"accessToken\", access); // تحديث الـ access token\r\n        localStorage.setItem(\"refreshToken\", refresh); // تحديث الـ refresh token\r\n\r\n        originalRequest.headers.Authorization = `Bearer ${access}`;\r\n        return axiosInstance(originalRequest);\r\n      } catch (refreshError) {\r\n        localStorage.removeItem(\"accessToken\");\r\n        localStorage.removeItem(\"refreshToken\");\r\n        window.location.href = \"/login\";\r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n\r\n\r\n// Signup\r\nexport const createUserFirst = async (data: signupType) => {\r\n  const response = await axiosInstance.post(\"accounts/register/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Singup Step1\r\nexport const validateUserFirst = async (data: signupStep1Type) => {\r\n  const response = await axiosInstance.post(\"accounts/verify-email/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Singup Step2\r\nexport const createUserSecond = async (data: signupStep2Type) => {\r\n  const response =  await axiosInstance.post(\"accounts/second-register/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Login \r\nexport const loginUser = async (data: loginType) => {\r\n  const response = await axiosInstance.post(\"accounts/login/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Logout\r\nexport const logoutUser = async (data: logoutType) => {\r\n  const response = await axiosInstance.post(\"accounts/logout/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Forget Password \r\nexport const forgetPassword = async (data: forgetPasswordType) => {\r\n  const response =  await axiosInstance.post(\"accounts/password/request-reset/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Reset Password \r\nexport const resetPassword = async (data: resetPasswordType) => {\r\n  const response = await axiosInstance.post(\"accounts/password/set-new/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Resend Code \r\nexport const resendCode = async (data: resendEmailCodeType) => {\r\n  const response = await axiosInstance.post(\"accounts/resend-email/\", data);\r\n  return response.data;\r\n};\r\n\r\n// Resend URL \r\nexport const resendUrl = async (data: resendUrlType) => {\r\n  const response = await axiosInstance.post(\"accounts/password/resend-url/\", data);\r\n  return response.data;\r\n};\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AACA;;AAEA,MAAM,WAAW;AAEV,MAAM,gBAAgB,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACxC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,cAAc,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACtC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;AAEA,cAAc,YAAY,CAAC,QAAQ,CAAC,GAAG,CACrC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IACE,MAAM,QAAQ,EAAE,WAAW,OAC3B,CAAC,gBAAgB,MAAM,IACvB,aAAa,OAAO,CAAC,iBACrB;QACA,gBAAgB,MAAM,GAAG;QACzB,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,MAAM,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,GAAG,SAAS,uBAAuB,CAAC,EAAE;gBACjE,SAAS;YACX;YAEA,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI,IAAI,EAAE,sBAAsB;YAC5D,aAAa,OAAO,CAAC,eAAe,SAAS,yBAAyB;YACtE,aAAa,OAAO,CAAC,gBAAgB,UAAU,0BAA0B;YAEzE,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAC1D,OAAO,cAAc;QACvB,EAAE,OAAO,cAAc;YACrB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa;AAIR,MAAM,kBAAkB,OAAO;IACpC,MAAM,WAAW,MAAM,cAAc,IAAI,CAAC,sBAAsB;IAChE,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,oBAAoB,OAAO;IACtC,MAAM,WAAW,MAAM,cAAc,IAAI,CAAC,0BAA0B;IACpE,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,mBAAmB,OAAO;IACrC,MAAM,WAAY,MAAM,cAAc,IAAI,CAAC,6BAA6B;IACxE,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,YAAY,OAAO;IAC9B,MAAM,WAAW,MAAM,cAAc,IAAI,CAAC,mBAAmB;IAC7D,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,aAAa,OAAO;IAC/B,MAAM,WAAW,MAAM,cAAc,IAAI,CAAC,oBAAoB;IAC9D,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,iBAAiB,OAAO;IACnC,MAAM,WAAY,MAAM,cAAc,IAAI,CAAC,oCAAoC;IAC/E,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,gBAAgB,OAAO;IAClC,MAAM,WAAW,MAAM,cAAc,IAAI,CAAC,8BAA8B;IACxE,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,aAAa,OAAO;IAC/B,MAAM,WAAW,MAAM,cAAc,IAAI,CAAC,0BAA0B;IACpE,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,YAAY,OAAO;IAC9B,MAAM,WAAW,MAAM,cAAc,IAAI,CAAC,iCAAiC;IAC3E,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/app/lib/loginservices/mutations.ts"],"sourcesContent":["\"use client\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport {\r\n  createUserFirst,\r\n  createUserSecond,\r\n  forgetPassword,\r\n  loginUser,\r\n  logoutUser,\r\n  resendCode,\r\n  resendUrl,\r\n  resetPassword,\r\n  validateUserFirst,\r\n} from \"./api\";\r\nimport {\r\n  loginType,\r\n  signupType,\r\n  signupStep1Type,\r\n  signupStep2Type,\r\n  forgetPasswordType,\r\n  resetPasswordType,\r\n  resendEmailCodeType,\r\n  resendUrlType,\r\n  logoutType,\r\n} from \"@/app/types/authTypes\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport axios from \"axios\";\r\nimport { useEmail } from \"../context/EmailContext\";\r\nimport { usePhone } from \"../context/PhoneContext\";\r\n\r\n// --------------Function--------------------\r\n// src/lib/helpers.ts\r\nexport function extractMessages(obj: {\r\n  [key: string]: string[] | { [key: string]: unknown };\r\n}): string[] {\r\n  const messages: string[] = [];\r\n\r\n  const traverse = (o: {\r\n    [key: string]: string[] | { [key: string]: unknown };\r\n  }) => {\r\n    for (const key in o) {\r\n      const value = o[key];\r\n      if (Array.isArray(value)) {\r\n        messages.push(...value);\r\n      } else if (typeof value === \"object\" && value !== null) {\r\n        traverse(value as { [key: string]: string[] | { [key: string]: unknown } });\r\n      }\r\n    }\r\n  };\r\n\r\n  traverse(obj);\r\n  return messages;\r\n}\r\n\r\n// -------------------------------------------------------\r\n// Signup\r\nexport function useCreateUserFirst(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const { setEmail } = useEmail();\r\n\r\n  return useMutation({\r\n    mutationFn: (data: signupType) => createUserFirst(data),\r\n\r\n    onMutate: () => {\r\n      console.log(\"جاري إنشاء الحساب...\");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n\r\n        const messages = errors ? extractMessages(errors) : [];\r\n\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      setEmail(data.user.email);\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n      setTimeout(() => {\r\n        router.push(\"signup/step1\");\r\n      }, 1200); // بعد انتهاء عرض التنبيه\r\n    },\r\n\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts/register\"] });\r\n    },\r\n  });\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------------\r\n// Singup Step1\r\nexport function useValidateUserFirst(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: signupStep1Type) => validateUserFirst(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate Signup Step1\");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n\r\n        const messages = errors ? extractMessages(errors) : [];\r\n\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n      setTimeout(() => {\r\n        router.push(\"step2\");\r\n      }, 1200); // بعد انتهاء عرض التنبيه\r\n    },\r\n\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({\r\n          queryKey: [\"accounts/verify-email/\"],\r\n        });\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n// Singup Step2\r\nexport function useCreateUserSecond(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const { setPhoneNumber } = usePhone();\r\n\r\n  return useMutation({\r\n    mutationFn: (data: signupStep2Type) => createUserSecond(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate Signup Step2\");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n\r\n        const messages = errors ? extractMessages(errors) : [];\r\n\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      setPhoneNumber(data.user.phone_number);\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n      setTimeout(() => {\r\n        router.push(\"step3\");\r\n      }, 2200); // بعد انتهاء عرض التنبيه\r\n    },\r\n\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({\r\n          queryKey: [\"accounts/second-register/\"],\r\n        });\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n// Login\r\nexport function useLogin(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: loginType) => loginUser(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate Login\");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n\r\n        const messages = errors ? extractMessages(errors) : [];\r\n\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      localStorage.setItem(\"accessToken\", data.access);\r\n      localStorage.setItem(\"refreshToken\", data.refresh);\r\n      console.log(\"refresh: \", data.refresh);\r\n      console.log(\"access: \", data.access);\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n      setTimeout(() => {\r\n        router.push(\"/\");\r\n      }, 1200); // بعد انتهاء عرض التنبيه\r\n    },\r\n\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({ queryKey: [\"accounts/login/\"] });\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n// Logout\r\nexport function useLogout(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: logoutType) => logoutUser(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate Logout\");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n\r\n        const messages = errors ? extractMessages(errors) : [];\r\n\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"refreshToken\");\r\n      console.log(\"LOGOUT DONE\");\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n      setTimeout(() => {\r\n        window.location.href = \"/\";\r\n      }, 1200);\r\n    },\r\n\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled Logout\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({ queryKey: [\"accounts/logout/\"] });\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n// Forget Password\r\nexport function useForgetPassword(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: forgetPasswordType) => forgetPassword(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate Forget Password \");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n\r\n        const messages = errors ? extractMessages(errors) : [];\r\n\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n      setTimeout(() => {\r\n        console.log(\"Forget Done\");\r\n      }, 1200); // بعد انتهاء عرض التنبيه\r\n    },\r\n\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({\r\n          queryKey: [\"accounts/password/request-reset/\"],\r\n        });\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n// Reset Password\r\nexport function useResetPassword(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  const router = useRouter();\r\n  return useMutation({\r\n    mutationFn: (data: resetPasswordType) => resetPassword(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate Reset Password \");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n      setTimeout(() => {\r\n        router.push(\"/login\");\r\n      }, 1200); // بعد انتهاء عرض التنبيه\r\n    },\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({\r\n          queryKey: [\"accounts/password/set-new/\"],\r\n        });\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n// Resend Code\r\nexport function useResendEmailCode(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: resendEmailCodeType) => resendCode(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate RESEND CODE \");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n    },\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({\r\n          queryKey: [\"accounts/password/resend-email/\"],\r\n        });\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n// Resend URL\r\nexport function useResendUrl(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: resendUrlType) => resendUrl(data),\r\n    onMutate: () => {\r\n      console.log(\"mutate RESEND URL \");\r\n    },\r\n\r\n    onError: (error: unknown) => {\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length\r\n          ? messages.join(\"\\n\")\r\n          : fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      console.log(\"RESEND DONE\");\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n    },\r\n    onSettled: async (_, error) => {\r\n      console.log(\"settled\");\r\n      if (error) {\r\n        console.log(error);\r\n      } else {\r\n        await queryClient.invalidateQueries({\r\n          queryKey: [\"accounts/password/resend-url/\"],\r\n        });\r\n      }\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/app/components/ui/Notification.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\ninterface NotificationProps {\r\n  message: string;\r\n  type: \"success\" | \"error\";\r\n  duration?: number;\r\n  onClose?: () => void;\r\n}\r\n\r\nconst Notification: React.FC<NotificationProps> = ({\r\n  message,\r\n  type,\r\n  duration = 4000,\r\n  onClose,\r\n}) => {\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setVisible(false);\r\n      onClose?.();\r\n    }, duration);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [duration, onClose]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div className=\"fixed top-4 left-4 right-4 sm:top-5 sm:left-1/2 sm:transform sm:-translate-x-1/2 sm:right-auto z-50 pointer-events-auto\">\r\n      <div\r\n        className={`w-full max-w-xl mx-auto p-4 sm:p-6 rounded-lg shadow-lg text-sm sm:text-lg transition-all duration-300 ${\r\n          type === \"success\"\r\n            ? \"bg-green-100 text-green-900 border border-green-400\"\r\n            : \"bg-red-100 text-red-900 border border-red-400\"\r\n        }`}\r\n      >\r\n        <div className=\"flex justify-between items-start sm:items-center gap-3\">\r\n          <span className=\"whitespace-pre-line font-semibold flex-1 leading-relaxed\">{message}</span>\r\n          <button\r\n            className=\"flex-shrink-0 text-2xl sm:text-3xl font-bold text-gray-700 hover:text-gray-900 transition-colors duration-200 p-1 -m-1\"\r\n            onClick={() => {\r\n              setVisible(false);\r\n              onClose?.();\r\n            }}\r\n            aria-label=\"Close notification\"\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n"],"names":[],"mappings":";;;;AACA;AADA;;;AAUA,MAAM,eAA4C,CAAC,EACjD,OAAO,EACP,IAAI,EACJ,WAAW,IAAI,EACf,OAAO,EACR;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,WAAW;YACvB,WAAW;YACX;QACF,GAAG;QAEH,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;QAAU;KAAQ;IAEtB,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,WAAW,CAAC,uGAAuG,EACjH,SAAS,YACL,wDACA,iDACJ;sBAEF,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAA4D;;;;;;kCAC5E,8OAAC;wBACC,WAAU;wBACV,SAAS;4BACP,WAAW;4BACX;wBACF;wBACA,cAAW;kCACZ;;;;;;;;;;;;;;;;;;;;;;AAOX;uCAEe","debugId":null}},
    {"offset": {"line": 812, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/app/components/dashborad/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n  Home,\r\n  List,\r\n  Heart,\r\n  Mail,\r\n  BookOpen,\r\n  Settings,\r\n  LogOut,\r\n} from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport { useState } from \"react\";\r\nimport alertCircle from \"../../../public/resourses/alert-circle.svg\";\r\nimport { useLogout } from \"@/app/lib/loginservices/mutations\";\r\nimport Notification from \"../ui/Notification\";\r\n\r\nconst navItems = [\r\n  { label: \"الرئيسية\", href: \"/dashboard\", icon: Home },\r\n  { label: \"إعلاناتي\", href: \"/dashboard/ads\", icon: List },\r\n  { label: \"المفضلة\", href: \"/dashboard/favorites\", icon: Heart },\r\n  { label: \"رسائلي\", href: \"/dashboard/messages\", icon: Mail },\r\n  { label: \"فواتيري\", href: \"/dashboard/rules\", icon: BookOpen },\r\n  { label: \"الإعدادات\", href: \"/dashboard/settings\", icon: Settings },\r\n];\r\n\r\nexport function SidebarContent({ onNavigate }: { onNavigate?: () => void }) {\r\n  const pathname = usePathname();\r\n  const [showLogoutConfirm, setShowLogoutConfirm] = useState(false);\r\n  const [notification, setNotification] = useState<{\r\n    message: string;\r\n    type: \"success\" | \"error\";\r\n  } | null>(null);\r\n\r\n  const logout = useLogout(setNotification);\r\n  const { isPending: isLoading } = logout;\r\n\r\n  const handleLogout = () => setShowLogoutConfirm(true);\r\n  const cancelLogout = () => setShowLogoutConfirm(false);\r\n\r\n  const confirmLogout = () => {\r\n    setShowLogoutConfirm(false);\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n    const jsonData = JSON.stringify({ refresh: refreshToken });\r\n    logout.mutate(JSON.parse(jsonData), {\r\n      onSuccess: () => {\r\n        window.location.href = \"/\";\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-full bg-white  flex flex-col justify-between px-4 py-6\">\r\n      {/* الشعار */}\r\n      <div className=\"mb-8 flex justify-center max-md:mt-10\">\r\n        <Link href=\"/\" className=\"text-2xl font-bold text-cgreen\">\r\n          Small Offer\r\n        </Link>\r\n      </div>\r\n\r\n      {/* عناصر التنقل */}\r\n      <nav className=\"flex flex-col items-start gap-2 flex-1 mt-4\">\r\n        {navItems.map(({ label, href, icon: Icon }) => {\r\n          const isActive = pathname === href;\r\n          return (\r\n            <Link\r\n              key={href}\r\n              href={href}\r\n              onClick={onNavigate}\r\n              className={`w-full flex items-center px-4 py-4 my-2 rounded-md transition-all \r\n                ${\r\n                  isActive\r\n                    ? \"bg-cgreen text-white font-semibold\"\r\n                    : \"text-gray-700 hover:bg-gray-100\"\r\n                }`}\r\n            >\r\n              <Icon size={20} className=\"ml-2\" />\r\n              <span>{label}</span>\r\n            </Link>\r\n          );\r\n        })}\r\n      </nav>\r\n\r\n      {/* تسجيل الخروج */}\r\n      <div className=\"pt-4 border-t flex justify-center\">\r\n        <button\r\n          onClick={handleLogout}\r\n          className=\"flex items-center justify-center gap-1 text-red-600 px-3 py-2 rounded-md hover:bg-red-50 transition-all\"\r\n        >\r\n          <LogOut size={18} />\r\n          <span className=\"text-sm w-[100px] font-semibold\">تسجيل الخروج</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* إشعار */}\r\n      {notification && (\r\n        <Notification\r\n          message={notification.message}\r\n          type={notification.type}\r\n          onClose={() => setNotification(null)}\r\n        />\r\n      )}\r\n      {/* تأكيد تسجيل الخروج */}\r\n      {showLogoutConfirm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white w-full max-w-md sm:max-w-lg mx-4 p-6 sm:p-8 rounded-lg shadow-lg text-center\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <div className=\"w-16 h-16 sm:w-20 sm:h-20 bg-red-400 rounded-full flex items-center justify-center\">\r\n                <Image\r\n                  src={alertCircle}\r\n                  alt=\"alertCircle\"\r\n                  className=\"w-10 sm:w-12\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <h3 className=\"text-lg sm:text-xl font-semibold text-gray-900 mb-2\">\r\n              تسجيل الخروج\r\n            </h3>\r\n            <p className=\"text-gray-600 mb-6 text-sm sm:text-base\">\r\n              هل أنت متأكد من تسجيل الخروج؟\r\n            </p>\r\n            <div className=\"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4\">\r\n              <button\r\n                onClick={confirmLogout}\r\n                disabled={isLoading}\r\n                className=\"w-full sm:w-auto font-semibold px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition disabled:opacity-50\"\r\n              >\r\n                {isLoading ? (\r\n                  <span className=\"flex justify-center items-center gap-2\">\r\n                    جاري المعالجة...\r\n                  </span>\r\n                ) : (\r\n                  \"تسجيل الخروج\"\r\n                )}\r\n              </button>\r\n              <button\r\n                onClick={cancelLogout}\r\n                className=\"w-full sm:w-auto font-semibold px-6 py-2 border border-cgreen text-chgreen rounded-md hover:bg-green-50 transition\"\r\n              >\r\n                إلغاء الأمر\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1092, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/app/dashboard/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ReactNode, useState } from \"react\";\r\nimport Header from \"../components/dashborad/Header\";\r\nimport { SidebarContent } from \"../components/dashborad/Sidebar\";\r\nimport { X } from \"lucide-react\";\r\n\r\nexport default function DashboardLayout({ children }: { children: ReactNode }) {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"flex w-full h-screen overflow-hidden relative\">\r\n      {/* السايدبار الثابت على الشاشات الكبيرة */}\r\n      <div className=\"hidden md:block w-[15%] max-lg:w-[20%] h-full shadow-md\">\r\n        <SidebarContent />\r\n      </div>\r\n\r\n      {/* المحتوى الرئيسي */}\r\n      <div className=\"flex-1 flex flex-col h-full\">\r\n        {/* <Header onMenuClick={() => setSidebarOpen(true)} /> */}\r\n\r\n        <main className=\"flex-1 overflow-y-auto sm:p-4 max-sm:w-full max-sm:-mr-1 bg-gray-200 rounded-md text-right\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n\r\n      {/* السايدبار المنبثق في الشاشات الصغيرة */}\r\n      <div\r\n        className={`fixed inset-0 z-40 md:hidden transition-transform duration-300 ${\r\n          sidebarOpen ? \"translate-x-0\" : \"translate-x-full\"\r\n        }`}\r\n      >\r\n        <div className=\"flex h-full\">\r\n          <div className=\"w-64 h-full bg-white shadow-lg relative\">\r\n            <button\r\n              className=\"absolute top-4 right-4 text-gray-600\"\r\n              onClick={() => setSidebarOpen(false)}\r\n            >\r\n              <X size={24} />\r\n            </button>\r\n            <SidebarContent onNavigate={() => setSidebarOpen(false)} />\r\n          </div>\r\n          <div\r\n            className=\"flex-1 bg-black opacity-40\"\r\n            onClick={() => setSidebarOpen(false)}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AALA;;;;;AAOe,SAAS,gBAAgB,EAAE,QAAQ,EAA2B;IAC3E,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,0IAAA,CAAA,iBAAc;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;0BAGb,cAAA,8OAAC;oBAAK,WAAU;8BACb;;;;;;;;;;;0BAKL,8OAAC;gBACC,WAAW,CAAC,+DAA+D,EACzE,cAAc,kBAAkB,oBAChC;0BAEF,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,WAAU;oCACV,SAAS,IAAM,eAAe;8CAE9B,cAAA,8OAAC,4LAAA,CAAA,IAAC;wCAAC,MAAM;;;;;;;;;;;8CAEX,8OAAC,0IAAA,CAAA,iBAAc;oCAAC,YAAY,IAAM,eAAe;;;;;;;;;;;;sCAEnD,8OAAC;4BACC,WAAU;4BACV,SAAS,IAAM,eAAe;;;;;;;;;;;;;;;;;;;;;;;AAM1C","debugId":null}}]
}