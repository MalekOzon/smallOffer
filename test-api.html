<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار API</title>
</head>
<body>
    <h1>اختبار API الإعلانات</h1>
    
    <div>
        <h2>إعلان عام</h2>
        <button onclick="testGenericPost()">اختبار إعلان عام</button>
        <div id="generic-result"></div>
    </div>

    <div>
        <h2>إعلان سيارة</h2>
        <button onclick="testCarPost()">اختبار إعلان سيارة</button>
        <div id="car-result"></div>
    </div>

    <div>
        <h2>إعلان أرض</h2>
        <button onclick="testLandPost()">اختبار إعلان أرض</button>
        <div id="land-result"></div>
    </div>

    <script>
        const BASE_URL = 'https://smalloffertest.onrender.com/api/';
        const token = localStorage.getItem('accessToken');

        async function testGenericPost() {
            const data = {
                title: "اختبار إعلان",
                description: "هذا إعلان تجريبي للاختبار",
                price: "1000",
                price_type: "fixed",
                city: "دمشق",
                hood: "المرجة",
                detailed_location: "شارع الرئيسي",
                cover_image: "https://example.com/image.jpg",
                category: "إلكترونيات",
                subcategory: "هواتف"
            };

            try {
                const response = await fetch(`${BASE_URL}accounts/posts/generic/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                document.getElementById('generic-result').innerHTML = `
                    <h3>النتيجة:</h3>
                    <p>Status: ${response.status}</p>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
            } catch (error) {
                document.getElementById('generic-result').innerHTML = `
                    <h3>خطأ:</h3>
                    <pre>${error.message}</pre>
                `;
            }
        }

        async function testCarPost() {
            const data = {
                title: "سيارة للبيع",
                description: "سيارة ممتازة للبيع",
                price: "50000",
                price_type: "negotiable",
                city: "دمشق",
                hood: "المرجة",
                detailed_location: "شارع الرئيسي",
                cover_image: "https://example.com/car.jpg",
                category: "سيارات",
                subcategory: "سيارات خاصة",
                car: {
                    brand: "تويوتا",
                    model: "كامري",
                    mileage: 50000,
                    fuel_type: "gasoline",
                    gearbox: "automatic",
                    car_type: "sedan"
                }
            };

            try {
                const response = await fetch(`${BASE_URL}accounts/posts/cars/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                document.getElementById('car-result').innerHTML = `
                    <h3>النتيجة:</h3>
                    <p>Status: ${response.status}</p>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
            } catch (error) {
                document.getElementById('car-result').innerHTML = `
                    <h3>خطأ:</h3>
                    <pre>${error.message}</pre>
                `;
            }
        }

        async function testLandPost() {
            const data = {
                title: "أرض للبيع",
                description: "أرض ممتازة للبيع في موقع استراتيجي",
                price: "100000",
                price_type: "negotiable",
                city: "دمشق",
                hood: "المرجة",
                detailed_location: "شارع الرئيسي",
                cover_image: "https://example.com/land.jpg",
                category: "عقارات",
                subcategory: "أراضي",
                outdoorspace: {
                    land_type: "residential_plot",
                    offer_type: "sale",
                    area: 500,
                    available_from: "2025-01-01"
                }
            };

            try {
                const response = await fetch(`${BASE_URL}accounts/posts/lands/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                document.getElementById('land-result').innerHTML = `
                    <h3>النتيجة:</h3>
                    <p>Status: ${response.status}</p>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
            } catch (error) {
                document.getElementById('land-result').innerHTML = `
                    <h3>خطأ:</h3>
                    <pre>${error.message}</pre>
                `;
            }
        }
    </script>
</body>
</html> 