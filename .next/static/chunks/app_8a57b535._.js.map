{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/app/lib/dashboardServices/dashboardMutation.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { extractMessages } from \"../loginservices/mutations\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { changePasswordDash, deleteAccount, EmailNotificationsDash, feedbackEmail, setUserInfo } from \"./dashboardApi\";\r\nimport { changePasswordDashType, deleteAccountType, EmailNotificationsDashType, feedbackEmailType, setUserInfoType } from \"@/app/types/authTypes\";\r\n\r\n\r\n// Change Password Dash\r\nexport function useChangePasswordDash(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: changePasswordDashType) => changePasswordDash(data),\r\n    onMutate: () => {\r\n      console.log(\"جاري تغيير كلمة المرور...\");\r\n    },\r\n    onError: (error: unknown) => {\r\n      console.log(\"Error in change password\")\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length ? messages.join(\"\\n\"): fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      console.log(\"Password Changed\")\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n    },\r\n\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts/dashboard/change-password/\"] });\r\n    },\r\n  });\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------------\r\n// Notifications Upddate\r\nexport function useEmailNotificationsDash(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: EmailNotificationsDashType) => EmailNotificationsDash(data),\r\n    onMutate: () => {\r\n      console.log(\"جاري تغيير  اعدادات الاشعارات...\");\r\n    },\r\n    onError: (error: unknown) => {\r\n      console.log(\"Error in change password\")\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length ? messages.join(\"\\n\"): fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      console.log(\"NOTI Changed\")\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n    },\r\n\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts/dashboard/settings/\"] });\r\n    },\r\n  });\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------------\r\n// Delete Account\r\nexport function useDeleteAccount(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: deleteAccountType) => deleteAccount(data),\r\n    onMutate: () => {\r\n      console.log(\"جاري حذف الحساب...\");\r\n    },\r\n    onError: (error: unknown) => {\r\n      console.log(\"Error in Delete Account\")\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length ? messages.join(\"\\n\"): fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      console.log(\"Account DELETED\")\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n    },\r\n\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts/dashboard/settings/\"] });\r\n    },\r\n  });\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------------\r\n// Send Feedback Email\r\nexport function useFeedbackEmail(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: feedbackEmailType) => feedbackEmail(data),\r\n    onMutate: () => {\r\n      console.log(\"جاري ارسال الايميل ...\");\r\n    },\r\n    onError: (error: unknown) => {\r\n      console.log(\"Error in Send Email\")\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length ? messages.join(\"\\n\"): fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      console.log(\"Email Send Done\")\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n    },\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts/dashboard/settings/feedback/\"] });\r\n    },\r\n  });\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------------\r\n// Send Feedback Email\r\nexport function useSetUserInfo(\r\n  setNotification: (v: { message: string; type: \"success\" | \"error\" }) => void\r\n) {\r\n  const queryClient = useQueryClient();\r\n  return useMutation({\r\n    mutationFn: (data: setUserInfoType) => setUserInfo(data),\r\n    onMutate: () => {\r\n      console.log(\"جاري تعديل البيانات  ...\");\r\n    },\r\n    onError: (error: unknown) => {\r\n      console.log(\"Error in Edit Info\")\r\n      if (axios.isAxiosError(error)) {\r\n        const detail = error.response?.data?.detail;\r\n        const errors = error.response?.data?.errors;\r\n        const messages = errors ? extractMessages(errors) : [];\r\n        const fallbackMessage = detail || \"حدث خطأ غير معروف.\";\r\n        const finalMessage = messages.length ? messages.join(\"\\n\"): fallbackMessage;\r\n        setNotification({\r\n          message: finalMessage,\r\n          type: \"error\",\r\n        });\r\n      } else {\r\n        setNotification({\r\n          message: \"حدث خطأ أثناء الاتصال بالسيرفر.\",\r\n          type: \"error\",\r\n        });\r\n      }\r\n    },\r\n\r\n    onSuccess: (data) => {\r\n      console.log(\"data: \",data)\r\n      setNotification({\r\n        message: data.detail,\r\n        type: \"success\",\r\n      });\r\n    },\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts/dashboard/\"] });\r\n    },\r\n  });\r\n}\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------------\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebProjects/smallOffer/app/dashboard/profile/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  useForm,\r\n  Controller,\r\n  SubmitHandler,\r\n} from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport Title from \"@/app/components/dashborad/Title\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"../../components/ui/select\";\r\nimport { countryCodes } from \"@/app/signup/step2/countryCodes\";\r\nimport { syrianGovernorates } from \"@/app/signup/step2/syrianGovernorates\";\r\nimport { useGetUserInfo } from \"@/app/lib/dashboardServices/dashboardQueries\";\r\nimport { useSetUserInfo } from \"@/app/lib/dashboardServices/dashboardMutation\";\r\nimport Notification from \"@/app/components/ui/Notification\";\r\nimport SkeletonNotificationSettings from \"@/app/components/ui/SkeletonNotificationSettings\";\r\n\r\nconst countryCallingCodes = [\r\n  \"+1\",\r\n  \"+7\",\r\n  \"+20\",\r\n  \"+27\",\r\n  \"+30\",\r\n  \"+31\",\r\n  \"+32\",\r\n  \"+33\",\r\n  \"+34\",\r\n  \"+36\",\r\n  \"+39\",\r\n  \"+40\",\r\n  \"+41\",\r\n  \"+44\",\r\n  \"+45\",\r\n  \"+46\",\r\n  \"+47\",\r\n  \"+48\",\r\n  \"+49\",\r\n  \"+51\",\r\n  \"+52\",\r\n  \"+53\",\r\n  \"+54\",\r\n  \"+55\",\r\n  \"+56\",\r\n  \"+57\",\r\n  \"+58\",\r\n  \"+60\",\r\n  \"+61\",\r\n  \"+62\",\r\n  \"+63\",\r\n  \"+64\",\r\n  \"+65\",\r\n  \"+66\",\r\n  \"+81\",\r\n  \"+82\",\r\n  \"+84\",\r\n  \"+86\",\r\n  \"+90\",\r\n  \"+91\",\r\n  \"+92\",\r\n  \"+93\",\r\n  \"+94\",\r\n  \"+95\",\r\n  \"+98\",\r\n  \"+211\",\r\n  \"+212\",\r\n  \"+213\",\r\n  \"+216\",\r\n  \"+218\",\r\n  \"+220\",\r\n  \"+221\",\r\n  \"+222\",\r\n  \"+223\",\r\n  \"+224\",\r\n  \"+225\",\r\n  \"+226\",\r\n  \"+227\",\r\n  \"+228\",\r\n  \"+229\",\r\n  \"+230\",\r\n  \"+231\",\r\n  \"+232\",\r\n  \"+233\",\r\n  \"+234\",\r\n  \"+235\",\r\n  \"+236\",\r\n  \"+237\",\r\n  \"+238\",\r\n  \"+239\",\r\n  \"+240\",\r\n  \"+241\",\r\n  \"+242\",\r\n  \"+243\",\r\n  \"+244\",\r\n  \"+245\",\r\n  \"+246\",\r\n  \"+247\",\r\n  \"+248\",\r\n  \"+249\",\r\n  \"+250\",\r\n  \"+251\",\r\n  \"+252\",\r\n  \"+253\",\r\n  \"+254\",\r\n  \"+255\",\r\n  \"+256\",\r\n  \"+257\",\r\n  \"+258\",\r\n  \"+260\",\r\n  \"+261\",\r\n  \"+262\",\r\n  \"+263\",\r\n  \"+264\",\r\n  \"+265\",\r\n  \"+266\",\r\n  \"+267\",\r\n  \"+268\",\r\n  \"+269\",\r\n  \"+290\",\r\n  \"+291\",\r\n  \"+297\",\r\n  \"+298\",\r\n  \"+299\",\r\n  \"+350\",\r\n  \"+351\",\r\n  \"+352\",\r\n  \"+353\",\r\n  \"+354\",\r\n  \"+355\",\r\n  \"+356\",\r\n  \"+357\",\r\n  \"+358\",\r\n  \"+359\",\r\n  \"+370\",\r\n  \"+371\",\r\n  \"+372\",\r\n  \"+373\",\r\n  \"+374\",\r\n  \"+375\",\r\n  \"+376\",\r\n  \"+377\",\r\n  \"+378\",\r\n  \"+380\",\r\n  \"+381\",\r\n  \"+382\",\r\n  \"+385\",\r\n  \"+386\",\r\n  \"+387\",\r\n  \"+389\",\r\n  \"+420\",\r\n  \"+421\",\r\n  \"+423\",\r\n  \"+500\",\r\n  \"+501\",\r\n  \"+502\",\r\n  \"+503\",\r\n  \"+504\",\r\n  \"+505\",\r\n  \"+506\",\r\n  \"+507\",\r\n  \"+508\",\r\n  \"+509\",\r\n  \"+590\",\r\n  \"+591\",\r\n  \"+592\",\r\n  \"+593\",\r\n  \"+594\",\r\n  \"+595\",\r\n  \"+596\",\r\n  \"+597\",\r\n  \"+598\",\r\n  \"+599\",\r\n  \"+670\",\r\n  \"+672\",\r\n  \"+673\",\r\n  \"+674\",\r\n  \"+675\",\r\n  \"+676\",\r\n  \"+677\",\r\n  \"+678\",\r\n  \"+679\",\r\n  \"+680\",\r\n  \"+681\",\r\n  \"+682\",\r\n  \"+683\",\r\n  \"+685\",\r\n  \"+686\",\r\n  \"+687\",\r\n  \"+688\",\r\n  \"+689\",\r\n  \"+690\",\r\n  \"+691\",\r\n  \"+692\",\r\n  \"+850\",\r\n  \"+852\",\r\n  \"+853\",\r\n  \"+855\",\r\n  \"+856\",\r\n  \"+880\",\r\n  \"+886\",\r\n  \"+960\",\r\n  \"+961\",\r\n  \"+962\",\r\n  \"+963\",\r\n  \"+964\",\r\n  \"+965\",\r\n  \"+966\",\r\n  \"+967\",\r\n  \"+968\",\r\n  \"+970\",\r\n  \"+971\",\r\n  \"+972\",\r\n  \"+973\",\r\n  \"+974\",\r\n  \"+975\",\r\n  \"+976\",\r\n  \"+977\",\r\n  \"+992\",\r\n  \"+993\",\r\n  \"+994\",\r\n  \"+995\",\r\n  \"+996\",\r\n  \"+998\",\r\n];\r\n\r\n// تأكد من ترتيب الرموز من الأطول إلى الأقصر لتجنب مشاكل التداخل\r\ncountryCallingCodes.sort((a, b) => b.length - a.length);\r\n\r\nfunction extractCountryCode(phone: string | null | undefined): string | null {\r\n  if (!phone) return null; // تحقق من أن phone ليس null أو undefined\r\n\r\n  for (const code of countryCallingCodes) {\r\n    if (phone.startsWith(code)) {\r\n      return code;\r\n    }\r\n  }\r\n\r\n  return null; // لم يتم العثور على رمز دولة مطابق\r\n}\r\n\r\n// تعريف الـ Zod schema\r\nconst schema = z.object({\r\n  email: z.string().email(\"يرجى إدخال بريد إلكتروني صحيح.\"),\r\n  firstName: z.string().min(2, \"الاسم الأول يجب أن يكون أطول من حرفين\"),\r\n  lastName: z.string().min(2, \"الاسم الأخير يجب أن يكون أطول من حرفين\"),\r\n  username: z.string().min(2, \"اسم المستخدم يجب أن يكون أطول من 2 أحرف\"),\r\n  phoneCode: z.string(),\r\n  phoneNumber: z.string().min(9, \"رقم الهاتف غير صحيح\"),\r\n  city: z.string(),\r\n  hood: z.string().min(2, \"المنطقة يجب أن تكون صحيحة\"),\r\n  detailed_location: z.string().min(5, \"تفاصيل العنوان يجب أن تكون صحيحة\"),\r\n  profile_image: z.union([z.instanceof(File), z.string()]),\r\n});\r\n\r\ntype FormData = {\r\n  firstName: string;\r\n  lastName: string;\r\n  username: string;\r\n  email: string;\r\n  phoneCode: string;\r\n  phoneNumber: string;\r\n  city: string;\r\n  hood: string;\r\n  detailed_location: string;\r\n  profile_image: File | string;\r\n};\r\n\r\nconst ProfileForm = () => {\r\n  const [preview, setPreview] = useState<string | null>(null);\r\n  const { data, isLoading } = useUserInfo();\r\n  const setUserInfo = useSetUserInfo();\r\n  const [selectedCity, setSelectedCity] = useState<string>(\"\");\r\n\r\n  const form = useForm<FormData>({\r\n    resolver: zodResolver(schema),\r\n    defaultValues: {\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      username: \"\",\r\n      email: \"\",\r\n      phoneCode: \"963\",\r\n      phoneNumber: \"\",\r\n      city: \"\",\r\n      hood: \"\",\r\n      detailed_location: \"\",\r\n      profile_image: \"\",\r\n    },\r\n  });\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setValue,\r\n    watch,\r\n    reset,\r\n    formState: { errors },\r\n  } = form;\r\n\r\n  const coverImage = watch(\"profile_image\");\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && data) {\r\n      const phone = data.phone || \"\";\r\n      const code = phone.slice(0, 3) || \"963\";\r\n      const localNumber = phone.slice(3) || \"\";\r\n\r\n      const cityFromApi = cities.find(\r\n        (city) => city.value === data.city\r\n      )?.value;\r\n\r\n      setSelectedCity(cityFromApi || \"\");\r\n\r\n      reset({\r\n        firstName: data.first_name || \"\",\r\n        lastName: data.last_name || \"\",\r\n        username: data.username || \"\",\r\n        email: data.email || \"\",\r\n        phoneCode: code,\r\n        phoneNumber: localNumber,\r\n        city: data.city || cityFromApi,\r\n        hood: data.hood || \"\",\r\n        detailed_location: data.detailed_location || \"\",\r\n        profile_image: data.profile_image || \"\",\r\n      });\r\n    }\r\n  }, [isLoading, data, reset]);\r\n\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setPreview(URL.createObjectURL(file));\r\n      setValue(\"profile_image\", file, {\r\n        shouldValidate: true,\r\n        shouldDirty: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const onSubmit = (values: FormData) => {\r\n    const formData = new FormData();\r\n\r\n    formData.append(\"first_name\", values.firstName);\r\n    formData.append(\"last_name\", values.lastName);\r\n    formData.append(\"username\", values.username);\r\n    formData.append(\"email\", values.email);\r\n    formData.append(\"phone\", values.phoneCode + values.phoneNumber);\r\n    formData.append(\"city\", values.city);\r\n    formData.append(\"hood\", values.hood);\r\n    formData.append(\"detailed_location\", values.detailed_location);\r\n\r\n    if (values.profile_image instanceof File) {\r\n      formData.append(\"profile_image\", values.profile_image);\r\n    }\r\n\r\n    setUserInfo.mutate(formData);\r\n  };\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form\r\n        onSubmit={handleSubmit(onSubmit)}\r\n        className=\"grid grid-cols-1 md:grid-cols-2 gap-4\"\r\n      >\r\n        {/* صورة المستخدم */}\r\n        <div className=\"col-span-1 md:col-span-2\">\r\n          <label htmlFor=\"profile_image\">الصورة الشخصية</label>\r\n          <div className=\"w-32 h-32 border rounded-full overflow-hidden mb-2\">\r\n            {preview ? (\r\n              <Image\r\n                src={preview}\r\n                alt=\"preview\"\r\n                width={128}\r\n                height={128}\r\n                className=\"object-cover w-full h-full\"\r\n              />\r\n            ) : typeof coverImage === \"string\" && coverImage !== \"\" ? (\r\n              <Image\r\n                src={coverImage}\r\n                alt=\"current\"\r\n                width={128}\r\n                height={128}\r\n                className=\"object-cover w-full h-full\"\r\n              />\r\n            ) : (\r\n              <div className=\"flex items-center justify-center w-full h-full text-4xl text-cgreen\">\r\n                +\r\n              </div>\r\n            )}\r\n          </div>\r\n          <Input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            id=\"profile_image\"\r\n            onChange={handleImageChange}\r\n          />\r\n        </div>\r\n\r\n        {/* الاسم الأول */}\r\n        <Input\r\n          label=\"الاسم الأول\"\r\n          {...register(\"firstName\")}\r\n          error={errors.firstName?.message}\r\n        />\r\n\r\n        {/* الاسم الأخير */}\r\n        <Input\r\n          label=\"الاسم الأخير\"\r\n          {...register(\"lastName\")}\r\n          error={errors.lastName?.message}\r\n        />\r\n\r\n        {/* اسم المستخدم */}\r\n        <Input\r\n          label=\"اسم المستخدم\"\r\n          {...register(\"username\")}\r\n          error={errors.username?.message}\r\n        />\r\n\r\n        {/* البريد الإلكتروني */}\r\n        <Input\r\n          label=\"البريد الإلكتروني\"\r\n          {...register(\"email\")}\r\n          error={errors.email?.message}\r\n        />\r\n\r\n        {/* رقم الهاتف */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <Input\r\n            label=\"رمز الدولة\"\r\n            className=\"w-20\"\r\n            {...register(\"phoneCode\")}\r\n            error={errors.phoneCode?.message}\r\n          />\r\n          <Input\r\n            label=\"رقم الهاتف\"\r\n            {...register(\"phoneNumber\")}\r\n            error={errors.phoneNumber?.message}\r\n          />\r\n        </div>\r\n\r\n        {/* المحافظة */}\r\n        <SelectInput\r\n          label=\"المحافظة\"\r\n          options={cities}\r\n          value={selectedCity}\r\n          onChange={(value) => {\r\n            setValue(\"city\", value, {\r\n              shouldDirty: true,\r\n              shouldValidate: true,\r\n            });\r\n            setSelectedCity(value);\r\n          }}\r\n          error={errors.city?.message}\r\n        />\r\n\r\n        {/* المنطقة */}\r\n        <Input\r\n          label=\"المنطقة\"\r\n          {...register(\"hood\")}\r\n          error={errors.hood?.message}\r\n        />\r\n\r\n        {/* تفاصيل العنوان */}\r\n        <TextareaInput\r\n          label=\"تفاصيل إضافية\"\r\n          {...register(\"detailed_location\")}\r\n          error={errors.detailed_location?.message}\r\n        />\r\n\r\n        {/* زر الحفظ */}\r\n        <div className=\"col-span-1 md:col-span-2 mt-4\">\r\n          <Button type=\"submit\" className=\"w-full\">\r\n            حفظ التعديلات\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Form>\r\n  );\r\n};\r\n\r\n\r\nexport default EditProfilePage;\r\n"],"names":[],"mappings":";;;;AAEA;AAKA;AAAA;AACA;AACA;AACA;AAYA;;;AAtBA;;;;;;;AA0BA,MAAM,sBAAsB;IAC1B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,gEAAgE;AAChE,oBAAoB,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,MAAM,GAAG,EAAE,MAAM;AAEtD,SAAS,mBAAmB,KAAgC;IAC1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","debugId":null}}]
}