# نظام نشر الإعلانات

## نظرة عامة

هذا النظام يدعم ثلاثة أنواع من الإعلانات:

1. **الإعلان العام**: للمنتجات والخدمات العامة
2. **إعلان السيارة**: للسيارات مع تفاصيل خاصة
3. **إعلان الأرض**: للأراضي والعقارات مع تفاصيل خاصة

## البنية

```
newpost/
├── page.tsx                    # الصفحة الرئيسية
├── components/
│   ├── GenericPostForm.tsx     # فورم الإعلان العام
│   ├── CarForm.tsx            # فورم تفاصيل السيارة
│   └── LandForm.tsx           # فورم تفاصيل الأرض
├── schemas/
│   ├── genericPostSchema.ts    # Schema للإعلان العام
│   ├── carSchema.ts           # Schema لتفاصيل السيارة
│   └── landSchema.ts          # Schema لتفاصيل الأرض
└── hooks/
    └── useSubmitGenericPost.ts # Hooks مساعدة
```

## كيفية العمل

### 1. الإعلان العام
- المستخدم يملأ فورم واحد يحتوي على المعلومات الأساسية
- يتم إرسال البيانات مباشرة للـ API

### 2. إعلان السيارة (مدمج)
- **المعلومات العامة**: المستخدم يملأ المعلومات الأساسية (العنوان، الوصف، السعر، إلخ)
- **تفاصيل السيارة**: المستخدم يملأ التفاصيل الخاصة بالسيارة
- يتم دمج البيانات وإرسالها للـ API

### 3. إعلان الأرض (مدمج)
- **المعلومات العامة**: المستخدم يملأ المعلومات الأساسية (العنوان، الوصف، السعر، إلخ)
- **تفاصيل الأرض**: المستخدم يملأ التفاصيل الخاصة بالأرض
- يتم دمج البيانات وإرسالها للـ API

**ملاحظة**: فورم السيارة والأرض يعرضان الآن في صفحة واحدة مع كلا القسمين مرئيين، بدلاً من خطوتين منفصلتين.

## API Endpoints

- `POST /accounts/posts/generic/` - للإعلانات العامة
- `POST /accounts/posts/cars/` - لإعلانات السيارات
- `POST /accounts/posts/lands/` - لإعلانات الأراضي

## Types

### GenericPostPayload
```typescript
{
  title: string;
  description: string;
  price: string;
  price_type: "fixed" | "negotiable";
  city: string;
  hood: string;
  detailed_location?: string;
  cover_image: string;
  gallery?: string[];
  category: string;
  subcategory: string;
}
```

### CarPostPayload
```typescript
GenericPostPayload & {
  car: {
    brand: string;
    model: string;
    mileage: number;
    // ... باقي الحقول الاختيارية
  }
}
```

### LandPostPayload
```typescript
GenericPostPayload & {
  outdoorspace: {
    land_type: "residential_plot" | "commercial_plot" | "agricultural_land" | "industrial_land";
    offer_type: "sale" | "rent";
    area: number;
    available_from?: string;
  }
}
```

## المميزات

- ✅ تحقق من صحة البيانات باستخدام Zod
- ✅ واجهة مستخدم محسنة مع عرض مدمج
- ✅ معالجة الأخطاء والإشعارات
- ✅ دعم المصفوفات (المميزات، أنظمة الحماية)
- ✅ تصميم متجاوب
- ✅ دعم اللغة العربية
- ✅ عرض حالة الإكمال لكل قسم
- ✅ دعم ثلاثة أنواع من الإعلانات

## الاستخدام

1. انتقل إلى `/newpost`
2. اختر نوع الإعلان
3. املأ المعلومات المطلوبة
4. اضغط "نشر"

### لإعلان السيارة:
1. املأ **المعلومات العامة** أولاً
2. ثم املأ **تفاصيل السيارة**
3. اضغط "نشر إعلان السيارة"

### لإعلان الأرض:
1. املأ **المعلومات العامة** أولاً
2. ثم املأ **تفاصيل الأرض**
3. اضغط "نشر إعلان الأرض"

## التطوير المستقبلي

- إضافة أنواع إعلانات أخرى (وظائف، خدمات، إلخ)
- تحسين معالجة الصور
- إضافة معاينة الإعلان قبل النشر
- دعم التعديل على الإعلانات
- إضافة حفظ مسودة الإعلان 